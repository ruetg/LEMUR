function f=dem_cmap(z,t,o,z2)
    l=max(z(:))-min(z(:))*3;
    if nargin<2
        t=0;
    end
    if nargin<3
        o=0;
    end
    
    if nargin>0
        if all(z(:)>=0)
            bath=false;
        else
            bath =true;
        end
    end
    switch t
        case 1
           f0=[
            255 255 255 ;
            110 110 110 ;
            158   0   0 ;
            161  67   0 ;
            232 215 125  ;    
            16 122  47 ;
           0  97  71];
       f0=flipud(f0);
        case 0
            %DEM
            f0=[51,102,0;129,195,31;255,255,204;244,189,69;102,51,12;102,51,0];
 
        case 2
       
    end
    switch o
        case 1
            %Ocean dark
            f1=[1,1,2;1,2,3;1,2,3;1,3,4;1,3,4;2,3,5;2,4,6;2,4,8;3,5,9;3,5,10;3,6,11;4,7,12;4,7,13;4,8,14;4,9,15;4,9,16;5,10,17;5,10,19;6,11,20;6,12,21;6,13,22;7,14,24;7,14,24;7,15,25;6,15,26;6,15,28;7,16,29;7,17,31;8,18,32;8,19,33;8,19,35;9,20,37;9,20,38;10,21,39;10,22,40;10,23,42;11,24,44;11,25,45;12,26,47;12,26,48;12,27,50;13,28,52;14,29,53;14,30,54;14,31,56;14,32,58;15,33,60;16,34,62;16,34,64;16,36,65;16,36,67;17,37,68;18,38,70;18,39,72;19,40,73;19,41,76;20,43,78;21,44,80;21,45,82;22,46,84;22,47,85;23,48,87;24,50,90;25,52,94;26,55,98;27,58,104;28,61,109;29,63,113;31,65,117;32,68,122;33,71,125;34,74,129;35,75,133;36,78,137;37,80,141;39,83,146;40,86,150;42,88,154;43,91,158;44,93,161;45,96,164;45,98,167;47,100,171;48,102,174;50,105,177;52,108,180;54,112,184;55,115,187;57,119,191;58,122,194;60,125,197;62,129,200;64,133,203;66,136,206;67,140,209;69,144,212;71,149,214;74,153,217;76,156,219;78,159,221;79,164,223;81,167,225;83,170,227;85,174,229;87,179,231;89,183,233;91,187,234;93,190,236;95,193,237;97,197,239;98,200,241;99,203,242;101,206,243;103,210,244;105,213,246;107,217,247;108,219,248;109,221,249;110,223,250;112,225,252;113,228,253;114,230,254;114,231,254;115,233,255;116,233,255];
        case 0
            %Ocean lighter
            f1=[0,38,115;0,38,115;0,41,117;0,41,117;0,43,122;0,43,122;0,45,128;0,45,128;0,46,130;0,46,130;0,47,135;0,47,135;0,51,140;0,51,140;0,53,145;0,53,145;0,54,148;0,54,148;0,56,153;0,56,153;0,58,158;0,58,158;0,63,163;0,63,163;0,65,168;0,65,168;0,65,171;0,65,171;0,67,176;0,67,176;0,69,181;0,69,181;0,74,186;0,74,186;0,77,191;0,77,191;0,78,194;0,78,194;0,80,199;0,80,199;0,82,204;0,82,204;0,87,209;0,87,209;0,88,212;0,88,212;0,90,217;0,90,217;0,92,222;0,92,222;0,95,227;0,95,227;0,101,232;0,101,232;0,102,235;0,102,235;0,104,240;0,104,240;0,106,245;0,106,245;0,108,250;0,108,250;0,111,255;0,111,255;5,118,255;5,118,255;10,120,255;10,120,255;18,129,255;18,129,255;25,133,255;25,133,255;31,135,255;31,135,255;36,142,255;36,142,255;41,144,255;41,144,255;48,152,255;48,152,255;56,156,255;56,156,255;61,161,255;61,161,255;66,164,255;66,164,255;74,167,255;74,167,255;82,174,255;82,174,255;87,176,255;87,176,255;92,182,255;92,182,255;97,184,255;97,184,255;105,190,255;105,190,255;112,193,255;112,193,255;117,195,255;117,195,255;122,200,255;122,200,255;128,202,255;128,202,255;138,208,255;138,208,255;143,210,255;143,210,255;148,212,255;148,212,255;153,216,255;153,216,255;161,219,255;161,219,255;168,223,255;168,223,255;173,225,255;173,225,255;179,228,255;179,228,255;184,230,255;184,230,255;191,233,255;191,233,255];
    end
  
    if nargout==0
                    map=imresize([5,35,80;5,37,83;5,39,86;5,40,89;5,42,92;6,44,95;6,46,98;6,48,100;6,49,103;6,51,106;6,53,109;6,55,112;6,57,115;7,59,118;7,60,121;7,62,124;7,64,127;7,66,130;7,68,133;7,69,136;7,71,138;7,73,141;8,75,144;8,77,147;8,78,150;8,82,156;10,84,158;12,87,159;15,89,161;17,92,163;19,94,164;21,97,166;24,99,168;26,102,169;28,104,171;30,107,173;33,109,174;35,112,176;37,114,178;39,116,179;41,119,181;44,121,182;46,124,184;48,126,186;50,129,187;53,131,189;55,134,191;57,136,192;59,139,194;62,141,196;66,146,199;68,147,200;69,149,200;71,150,201;72,152,201;74,153,202;76,155,202;77,156,203;79,157,204;81,159,204;82,160,205;84,162,205;85,163,206;87,165,207;89,166,207;90,167,208;92,169,208;93,170,209;95,172,209;97,173,210;98,174,211;100,176,211;102,177,212;103,179,212;105,180,213;106,182,213;108,183,214;110,184,215;113,186,215;115,187,216;118,189,216;120,190,217;122,192,218;125,193,218;127,194,219;129,196,220;132,197,220;134,199,221;137,200,221;139,202,222;141,203,223;144,204,223;146,206,224;149,207,224;151,209,225;153,210,226;156,211,226;158,213,227;160,214,228;163,216,228;165,217,229;170,220,230;172,221,231;174,222,232;176,223,233;178,224,234;179,225,235;181,226,236;183,227,237;185,228,238;187,229,239;189,230,240;191,231,241;193,232,242;195,233,243;196,233,243;198,234,244;200,235,245;202,236,246;204,237,247;206,238,248;208,239,249;210,240,250;211,241,251;213,242,252;215,243,253;219,245,255;255,255,200;255,254,197;255,253,193;255,252,190;255,251,187;255,250,184;255,249,180;255,248,177;255,247,174;255,246,171;255,245,167;255,244,164;255,243,161;255,243,158;255,242,154;255,241,151;255,240,148;255,239,144;255,238,141;255,237,138;255,236,135;255,235,131;255,234,128;255,233,125;255,232,122;255,230,115;255,229,113;254,227,111;254,226,109;253,225,108;253,224,106;252,222,104;252,221,102;251,220,100;251,219,98;250,217,97;250,216,95;249,215,93;249,214,91;248,212,89;248,211,87;247,210,85;247,208,84;246,207,82;246,206,80;245,205,78;245,203,76;244,202,74;244,201,73;243,200,71;242,197,67;242,194,65;241,191,63;241,188,62;240,185,60;240,182,58;239,179,56;239,176,54;238,173,53;238,170,51;237,167,49;237,164,47;236,161,45;236,159,44;236,156,42;235,153,40;235,150,38;234,147,36;234,144,34;233,141,33;233,138,31;232,135,29;232,132,27;231,129,25;231,126,24;230,123,22;230,120,20;229,118,19;228,116,18;227,114,18;225,112,17;224,110,16;223,108,15;222,107,15;221,105,14;220,103,13;218,101,12;217,99,12;216,97,11;215,95,10;214,93,9;213,91,8;212,89,8;210,87,7;209,85,6;208,83,5;207,82,5;206,80,4;205,78,3;203,76,2;202,74,2;200,70,0;198,69,1;195,68,2;193,67,3;190,65,4;188,64,4;185,63,5;183,62,6;180,61,7;178,60,8;175,58,9;173,57,10;170,56,11;168,55,12;165,54,12;163,53,13;160,52,14;158,50,15;155,49,16;153,48,17;150,47,18;148,46,19;145,45,19;143,43,20;140,42,21;135,40,23],[100,3])./255;
            map=[map(1:end/2,:);[1 1 1]; [1 1 1];map(end/2+1:end,:)];
            map=map*255;
                            demcmap([min(z(:)) max(z(:))],1000,map(1:end/2,:)/256,map(end/2+1:end,:)/256);

                %colormap(gca,f);
                if nargin<=3
                    z2=z;
                end

    z=z2;
    f=[f1 ;f0];
        if 0
            [m,n]=size(z);
          %  h=hillshade(z/max(z(:))*50,1:n,1:m);
            p=get(gca,'position');
            a=gca;
            axes('position',p);
            pcolor(h);shading interp;colormap(gca,gray);
            axis off;
            alpha(gca,.3);
            %axes(a);
        end


        
    end
end
